# Troubleshooting — Common Problems and Fixes

---

## The Page Won't Load / Looks Broken

**Cause:** You opened `index.html` directly as a `file://` URL.  
**Fix:** Start a local HTTP server (see [README.md → Starting the Simulator](README.md)).

```bash
npx live-server   # from the project folder
```

---

## Pyodide Never Loads / Progress Bar Stuck at 32%

**Symptom:** The Python progress modal shows "Loading Python..." and stays there.  
**Cause:** The Pyodide WASM bundle failed to download.

**Fixes:**

1. Check your internet connection — first load requires downloading ~30 MB from `cdn.jsdelivr.net`
2. Open DevTools (F12) → Network tab — look for a failed request to `pyodide.js` or `pyodide.asm.wasm`
3. If behind a corporate proxy or firewall, `cdn.jsdelivr.net` may be blocked — ask your network team to whitelist it
4. If online but still failing: hard-refresh (`Ctrl+Shift+R`) to clear any partial cache
5. Check the browser console for a specific error message

**After loading once:** The WASM bundle is cached in the browser's cache. Subsequent loads (even offline) work immediately.

---

## Show Generation Produces No Movements

**Symptom:** The progress modal completes, but the character monitors show nothing during playback.  
**Cause A:** Audio file is silence or near-silence  
**Fix A:** Verify the uploaded file isn't empty. Play it back in a media player first.

**Cause B:** The audio is in a format the browser can't decode  
**Fix B:** Convert to WAV (44100 Hz, stereo) using Audacity or ffmpeg before uploading.

**Cause C:** The wrong band is selected  
**Fix C:** Check that the band (Rock/Munch) matches the character set you expect to see active.

---

## The Music Plays But the Monitors Don't Move

**Cause:** The signal generator isn't receiving frame data. The playback schedule may be empty.  
**Fix:** Check the browser console for `buildPlaybackSchedule: 0 events` or similar. If so, re-upload the audio and regenerate.

---

## Exported 4-Channel WAV Fails Signal Visualizer

**Symptom:** Visualizer shows "Frame sync: NO LOCK" or blank-bit integrity < 80%.  
**Cause (old pipeline):** This was caused by the pre-Python Web Audio API export method, which could not reliably produce hardware-conformant BMC.  
**Fix:** Ensure you are using the Python export path (`SCME/SGM/export_bridge.py` via Pyodide). If the Python modal appeared during export, you used the correct path. See the [SGM validation history](../research/sgm-validation-history.md) for the full story.

---

## RR-Engine Refuses to Load the .rshw File

**Symptom:** RR-Engine shows "Deserialization error" or "Invalid format".  
**Cause A:** The NRBF stream has incorrect backing-field names.  
**Fix A:** Update `SCME/SGM/rshw_builder.py` — the field names must exactly be `<audioData>k__BackingField` etc. (with angle brackets).

**Cause B:** The `.rshw` was generated by an incompatible version of the builder.  
**Fix B:** Re-export from the current simulator version.

---

## RR-Engine Loads the Show But the Figures Don't Move

**Symptom:** Music plays in RR-Engine but the animatronic figures are completely still.  
**Cause A:** Control signal channels (Ch2/Ch3) are swapped or missing.  
**Fix A:** Verify the 4-channel WAV has 4 channels. Open it in Audacity — channels 2 and 3 should look like square-wave BMC signals (not the music waveform).

**Cause B:** TD/BD channels are correct but the figures are physically disconnected.  
**Fix B:** This is a hardware issue, not a simulator issue. Check SPTE connections.

---

## BMC Signals Audible Through Speakers During Playback

**Symptom:** A loud screeching sound comes through the speakers during preview.  
**Cause:** The Web Audio graph is routing the BMC signal to the speaker output.  
**Fix:** The signal generator should be on a separate audio graph that does not connect to `AudioContext.destination` during preview. Check `cyberstar-signals.js` — the signal should only be scheduled, not played to speakers. If this regresses, set the generator's `GainNode` to `0` for the output path.

---

## "stDirectDecode is not defined" Console Error

**Symptom:** CSO export fails with this error.  
**Cause:** `cso-exporter.js` loaded before `app.js`, so `stDirectDecode()` isn't defined yet.  
**Fix:** Check the script loading order in `index.html` — `app.js` must load before `cso-exporter.js`, or `cso-exporter.js` must load after all other scripts.

---

## Show Saved to "My Shows" Disappeared

**Cause:** Browser `localStorage` was cleared (clearing browsing data, or using a private/incognito window).  
**Fix:** Always export your show to a `.cybershow.json` file on disk as a backup. `localStorage` is not a reliable long-term store.

---

## Getting More Help

Open the browser developer console (F12) — most errors produce descriptive messages with file names and line numbers. Search this documentation for the error keyword, or open an issue in the project repository with:

1. The exact error message
2. Which browser and version you're using
3. What audio file you uploaded (format, duration, sample rate)
4. The steps you took before the error appeared
